<?xml version="1.0" encoding="utf-8" ?>
<Patch>
	<Operation Class="PatchOperationSequence">
		<operations>
			<li Class="PatchOperationTest">
				<xpath>/Defs/ThinkTreeDef[defName='MainColonistBehaviorCore']/thinkRoot[@Class='ThinkNode_Tagger']/subNodes/li[@Class='ThinkNode_PrioritySorter']/subNodes</xpath>
			</li>
			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThinkTreeDef[defName='MainColonistBehaviorCore']/thinkRoot[@Class='ThinkNode_Tagger']/subNodes/li[@Class='ThinkNode_PrioritySorter']/subNodes</xpath>
				<order>Prepend</order>
				<value>
					<li Class="HediffResourceFramework.JobGiver_RefillResource"/>
				</value>
			</li>

			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[thingClass="Building_WorkTable"]/comps</xpath>
				<success>Always</success>
				<nomatch Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[thingClass="Building_WorkTable"]</xpath>
					<value>
						<comps />
					</value>
				</nomatch>
			</li>

			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[thingClass="Building_WorkTable"]/comps</xpath>
				<value>
					<li Class="HediffResourceFramework.CompProperties_FacilityInUse_StatBoosters">
						<statBoosters>
							<li>
								<hediff>FE_FusionReactor</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<resourceOnComplete>-150</resourceOnComplete>
								<addHediffIfMissing>false</addHediffIfMissing>
								<defaultToggleState>true</defaultToggleState>
								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<WorkTableWorkSpeedFactor>0.5</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>0.5</WorkTableEfficiencyFactor>
								</statOffsets>
								<statFactors>
									<WorkTableWorkSpeedFactor>2</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>2</WorkTableEfficiencyFactor>
								</statFactors>

								<glowOnlyPowered>true</glowOnlyPowered>
								<glowerOptions>
									<glowRadius>10</glowRadius>
									<glowColor>(52,87,13,0)</glowColor>
									<overlightRadius>0</overlightRadius>
								</glowerOptions>

								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingFusionReactor</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle fusion reactor use</toggleResourceLabel>
								<toggleResourceDesc>Toggle fusion reactor use</toggleResourceDesc>
								<increaseQuality>6</increaseQuality>
								<increaseQualityCeiling>Legendary</increaseQualityCeiling>

								<outputStatOffsets>
									<Beauty>5</Beauty>
								</outputStatOffsets>
								<outputStatFactors>
									<Beauty>2</Beauty>
								</outputStatFactors>
							</li>
							<li>
								<hediff>FE_StimHediff</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<resourceOnComplete>-150</resourceOnComplete>
								<addHediffIfMissing>false</addHediffIfMissing>
								<defaultToggleState>false</defaultToggleState>

								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<WorkTableWorkSpeedFactor>0.5</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>0.5</WorkTableEfficiencyFactor>
								</statOffsets>
								<statFactors>
									<WorkTableWorkSpeedFactor>2</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>2</WorkTableEfficiencyFactor>
								</statFactors>

								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingStim</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle stim use</toggleResourceLabel>
								<toggleResourceDesc>Toggle stim use</toggleResourceDesc>
								<increaseQuality>6</increaseQuality>
								<increaseQualityCeiling>Legendary</increaseQualityCeiling>

								<outputStatOffsets>
									<Beauty>5</Beauty>
								</outputStatOffsets>
								<outputStatFactors>
									<Beauty>2</Beauty>
								</outputStatFactors>
							</li>
						</statBoosters>
					</li>
				</value>
			</li>

			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[thingClass="Building_WorkTable_HeatPush"]/comps</xpath>
				<success>Always</success>
				<nomatch Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[thingClass="Building_WorkTable_HeatPush"]</xpath>
					<value>
						<comps />
					</value>
				</nomatch>
			</li>

			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[thingClass="Building_WorkTable_HeatPush"]/comps</xpath>
				<value>
					<li Class="HediffResourceFramework.CompProperties_FacilityInUse_StatBoosters">
						<statBoosters>
							<li>
								<hediff>FE_FusionReactor</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<resourceOnComplete>-150</resourceOnComplete>
								<texPathToggledOn>Things/Building/Production/TableStoveElectric</texPathToggledOn>
								<defaultToggleState>false</defaultToggleState>
								<addHediffIfMissing>false</addHediffIfMissing>
								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<WorkTableWorkSpeedFactor>0.5</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>0.5</WorkTableEfficiencyFactor>
								</statOffsets>
								<statFactors>
									<WorkTableWorkSpeedFactor>2</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>2</WorkTableEfficiencyFactor>
								</statFactors>
								<glowOnlyPowered>true</glowOnlyPowered>
								<glowerOptions>
									<glowRadius>10</glowRadius>
									<glowColor>(52,87,13,0)</glowColor>
									<overlightRadius>0</overlightRadius>
								</glowerOptions>
								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingFusionReactor</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle fusion reactor use</toggleResourceLabel>
								<toggleResourceDesc>Toggle fusion reactor use</toggleResourceDesc>
								<increaseQuality>6</increaseQuality>
								<increaseQualityCeiling>Legendary</increaseQualityCeiling>

								<outputStatOffsets>
									<Beauty>5</Beauty>
								</outputStatOffsets>
								<outputStatFactors>
									<Beauty>2</Beauty>
								</outputStatFactors>

							</li>
							<li>
								<hediff>FE_StimHediff</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<resourceOnComplete>-150</resourceOnComplete>
								<addHediffIfMissing>false</addHediffIfMissing>
								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<WorkTableWorkSpeedFactor>0.5</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>0.5</WorkTableEfficiencyFactor>
								</statOffsets>
								<statFactors>
									<WorkTableWorkSpeedFactor>2</WorkTableWorkSpeedFactor>
									<WorkTableEfficiencyFactor>2</WorkTableEfficiencyFactor>
								</statFactors>

								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingStim</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle stim use</toggleResourceLabel>
								<toggleResourceDesc>Toggle stim use</toggleResourceDesc>
								<increaseQuality>6</increaseQuality>
								<increaseQualityCeiling>Legendary</increaseQualityCeiling>

								<outputStatOffsets>
									<Beauty>5</Beauty>
								</outputStatOffsets>
								<outputStatFactors>
									<Beauty>2</Beauty>
								</outputStatFactors>
							</li>
						</statBoosters>
					</li>
				</value>
			</li>

			<li Class="PatchOperationConditional">
				<xpath>/Defs/ThingDef[thingClass="Building_Bed"]/comps</xpath>
				<success>Always</success>
				<nomatch Class="PatchOperationAdd">
					<xpath>/Defs/ThingDef[thingClass="Building_Bed"]</xpath>
					<value>
						<comps />
					</value>
				</nomatch>
			</li>

			<li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[thingClass="Building_Bed"]/comps</xpath>
				<value>
					<li Class="HediffResourceFramework.CompProperties_FacilityInUse_StatBoosters">
						<statBoosters>
							<li>
								<hediff>FE_FusionReactor</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<defaultToggleState>false</defaultToggleState>
								<addHediffIfMissing>false</addHediffIfMissing>
								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<BedRestEffectiveness>0.5</BedRestEffectiveness>
								</statOffsets>
								<statFactors>
									<BedRestEffectiveness>2</BedRestEffectiveness>
								</statFactors>

								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingFusionReactor</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle fusion reactor use</toggleResourceLabel>
								<toggleResourceDesc>Toggle fusion reactor use</toggleResourceDesc>

							</li>
						</statBoosters>
					</li>
				</value>
			</li>
			<li Class="PatchOperationAddModExtension">
				<xpath>/Defs/ThingDef[thingClass="Building_Bed"]</xpath>
				<value>
					<li Class="HediffResourceFramework.FacilityInProgress">
						<statBoosters>
							<li>
								<hediff>FE_FusionReactor</hediff>
								<resourcePerSecond>-5</resourcePerSecond>
								<addHediffIfMissing>false</addHediffIfMissing>
								<!-- in case if you want to make resourcePerSecond to add resource amount. works only for positive resourcePerSecond fields -->
								<qualityScalesResourcePerSecond>true</qualityScalesResourcePerSecond>
								<!-- this will affect only resource consumption (ie masterwork furniture will drain the resource more) -->
								<statOffsets>
									<BedRestEffectiveness>0.5</BedRestEffectiveness>
								</statOffsets>
								<statFactors>
									<BedRestEffectiveness>2</BedRestEffectiveness>
								</statFactors>

								<preventUseIfHediffMissing>true</preventUseIfHediffMissing>
								<cannotUseMessageKey>FE.CannotUseMissingFusionReactor</cannotUseMessageKey>
								<toggleResourceUse>true</toggleResourceUse>
								<toggleResourceGizmoTexPath>UI/Designators/Cancel</toggleResourceGizmoTexPath>
								<toggleResourceLabel>Toggle fusion reactor use</toggleResourceLabel>
								<toggleResourceDesc>Toggle fusion reactor use</toggleResourceDesc>

							</li>
						</statBoosters>
					</li>
				</value>
			</li>
			<li Class="PatchOperationAddModExtension">
				<xpath>/Defs/ThingDef[thingClass="Building_Bed"]</xpath>
				<value>
					<li Class="HediffResourceFramework.BuildingSpawnOptions">
						<materialReplaces>
							<li>
								<floorDef>Soil</floorDef>
								<replaceWithThingDef>DoubleBed</replaceWithThingDef>
								<replaceWithStuffDef>Gold</replaceWithStuffDef>
							</li>
							<li>
								<floorDef>Gravel</floorDef>
								<replaceWithThingDef>Bed</replaceWithThingDef>
								<replaceWithStuffDef>Plasteel</replaceWithStuffDef>
							</li>
						</materialReplaces>
					</li>
				</value>
			</li>

			<li Class="PatchOperationAddModExtension">
				<xpath>/Defs/SkillDef[defName="Shooting"]</xpath>
				<value>
					<li Class="HediffResourceFramework.SkillHediffGrantOptions">
						<hediffGrantRequirements>
							<li>
								<minLevel>5</minLevel>
								<minPassion>None</minPassion>
								<hediff>Carcinoma</hediff>
								<requiredSkills>
									<li>
										<skill>Melee</skill>
										<minLevel>1</minLevel>
										<minPassion>None</minPassion>
									</li>
									<li>
										<skill>Construction</skill>
										<minLevel>1</minLevel>
										<minPassion>None</minPassion>
									</li>
								</requiredSkills>
							</li>
						</hediffGrantRequirements>
					</li>
				</value>
			</li>

			<!-- <li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName="Plant_Healroot"]</xpath>
				<value>
					<comps>
						<li Class="HediffResourceFramework.CompProperties_PlantResource">
							<statBoosters>
								<li>
									<hediff>FE_ToxicFumes</hediff>
									<addHediffIfMissing>true</addHediffIfMissing>
									<resourceOnSow>1</resourceOnSow>
									<resourceOnHarvest>3</resourceOnHarvest>
									<scaleWithGrowthRate>true</scaleWithGrowthRate>
								</li>
								<li>
									<hediff>FE_FusionReactor</hediff>
									<addHediffIfMissing>false</addHediffIfMissing>
									<requireResource>true</requireResource>
									<resourceOnSow>-2</resourceOnSow>
									<resourceOnHarvest>-5</resourceOnHarvest>
									<scaleWithGrowthRate>false</scaleWithGrowthRate>
									<harvestYieldAdjust>0.5</harvestYieldAdjust>
								</li>
							</statBoosters>
						</li>
					</comps>
				</value>
			</li> -->

			<!-- <li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName="RockBase"]</xpath>
				<value>
					<comps>
						<li Class="HediffResourceFramework.CompProperties_MiningResource">
							<statBoosters>
								<li>
									<hediff>FE_ToxicFumes</hediff>
									<addHediffIfMissing>true</addHediffIfMissing>
									<resourceOnStrike>0.5</resourceOnStrike>
									<resourceOnComplete>2.5</resourceOnComplete>
								</li>
								<li>
									<hediff>FE_FusionReactor</hediff>
									<addHediffIfMissing>false</addHediffIfMissing>
									<requireResource>true</requireResource>
									<resourceOnStrike>-2</resourceOnStrike>
									<resourceOnComplete>-10</resourceOnComplete>
									<miningYieldAdjust>1.0</miningYieldAdjust>
								</li>
							</statBoosters>
						</li>
					</comps>
				</value>
			</li> -->
			
			<!-- <li Class="PatchOperationAdd">
				<xpath>/Defs/ThingDef[defName="Muffalo"]/comps</xpath>
				<value>
						<li Class="HediffResourceFramework.CompProperties_AnimalResource">
							<statBoosters>
								<li>
									<hediff>FE_FusionReactor</hediff>
									<addHediffIfMissing>false</addHediffIfMissing>
									<requireResource>true</requireResource>
									<resourceOnTaming>-2</resourceOnTaming>
									<tamingChanceAdjust>0.25</tamingChanceAdjust>
									<resourceOnTraining>-2</resourceOnTraining>
									<trainingChanceAdjust>0.25</trainingChanceAdjust>
									<resourceOnGather>-5</resourceOnHarvest>
									<animalYieldAdjust>0.5</animalYieldAdjust>
								</li>
								<li>
									<hediff>FE_ToxicFumes</hediff>
									<addHediffIfMissing>true</addHediffIfMissing>
									<requireResource>false</requireResource>
									<resourceOnTaming>2</resourceOnTaming>
									<resourceOnTraining>2</resourceOnTraining>
									<resourceOnGather>5</resourceOnHarvest>
								</li>
							</statBoosters>
						</li>
				</value>
			</li> -->
		</operations>
	</Operation>
</Patch>